(function(){"use strict";var t={6789:function(t,n,e){var s=e(9242),a=e(3396);const i={class:"container with-nav"};function r(t,n,e,s,r,o){const l=(0,a.up)("the-navbar"),c=(0,a.up)("router-view");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(l),(0,a._)("div",i,[(0,a.Wm)(c)])],64)}const o={class:"navbar"},l=(0,a._)("h3",null," Freelance ",-1),c={class:"navbar-menu"};function u(t,n,e,s,i,r){const u=(0,a.up)("router-link");return(0,a.wg)(),(0,a.iD)("nav",o,[l,(0,a._)("ul",c,[(0,a._)("li",null,[(0,a.Wm)(u,{to:"/"},{default:(0,a.w5)((()=>[(0,a.Uk)("Все задачи")])),_:1})]),(0,a._)("li",null,[(0,a.Wm)(u,{to:"/new"},{default:(0,a.w5)((()=>[(0,a.Uk)("Создать")])),_:1})])])])}var d={},p=e(89);const k=(0,p.Z)(d,[["render",u]]);var f=k,v={components:{TheNavbar:f}};const g=(0,p.Z)(v,[["render",r]]);var h=g,m=e(2483),_=e(7139);const w={key:0,class:"text-white center"},y={key:1,class:"text-white"},b={class:"card-title"},T=["onClick"];function D(t,n,e,s,i,r){const o=(0,a.up)("AppStatus");return(0,a.wg)(),(0,a.iD)(a.HY,null,[s.isEmptyTasks?((0,a.wg)(),(0,a.iD)("h1",w,"Задач пока нет")):(0,a.kq)("",!0),s.tasks.length?((0,a.wg)(),(0,a.iD)("h3",y,"Всего активных задач: "+(0,_.zw)(s.activeTasksCount),1)):(0,a.kq)("",!0),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(s.tasks,(t=>((0,a.wg)(),(0,a.iD)("div",{key:t.id,class:"card"},[(0,a._)("h2",b,(0,_.zw)(t.title),1),(0,a._)("p",null,[(0,a._)("strong",null,[(0,a._)("small",null,[(0,a.Uk)(" Статус: "),(0,a.Wm)(o,{type:t.status},null,8,["type"])])])]),(0,a._)("p",null,[(0,a._)("strong",null,[(0,a._)("small",null," Дэдлайн: "+(0,_.zw)(t.deadline),1)])]),(0,a._)("p",null,[(0,a._)("strong",null,[(0,a._)("small",null," Описание: "+(0,_.zw)(t.description),1)])]),(0,a._)("button",{onClick:n=>s.showTaskItem(t.id),class:"btn primary"},"Посмотреть",8,T)])))),128))],64)}e(7658);function C(t,n,e,s,i,r){return(0,a.wg)(),(0,a.iD)("span",{class:(0,_.C_)(["badge",s.statusClass])},(0,_.zw)(s.status),3)}var x={props:["type"],setup(t){const n={active:{text:"Активен",class:"primary"},done:{text:"Завершен",class:"primary"},cancelled:{text:"Отменен",class:"danger"},pending:{text:"Выполняестся",class:"warning"}},e=(0,a.Fl)((()=>n[t.type].text)),s=(0,a.Fl)((()=>n[t.type].class));return{status:e,statusClass:s}}};const U=(0,p.Z)(x,[["render",C]]);var O=U,j=e(65),F={components:{AppStatus:O},setup(){const t=(0,m.tv)(),n=(0,j.oR)(),e=(0,a.Fl)((()=>n.getters.tasksArr)),s=(0,a.Fl)((()=>n.getters.tasksArr)),i=(0,a.Fl)((()=>!n.getters.tasksArr)),r=(0,a.Fl)((()=>n.getters.tasksArr.filter((({status:t})=>"active"===t||"pending"===t)).length)),o=(0,a.Fl)((()=>n.getters.isLoading));function l(n){t.push(`/task/${n}`)}function c(){n.dispatch("fetchTasks")}return(0,a.bv)((()=>{c()})),{tasks:s,tasksCount:e,isEmptyTasks:i,showTaskItem:l,activeTasksCount:r,isLoading:o}}};const A=(0,p.Z)(F,[["render",D]]);var L=A;const S={class:"card"},z=(0,a._)("h1",null,"Создать новую задачу",-1),Z={class:"form-control"},H=(0,a._)("label",{for:"title"},"Название",-1),I={class:"form-control"},M=(0,a._)("label",{for:"date"},"Дата дэдлайна",-1),P={class:"form-control"},W=(0,a._)("label",{for:"description"},"Описание",-1);function q(t,n,e,i,r,o){return(0,a.wg)(),(0,a.iD)("form",S,[z,(0,a._)("div",Z,[H,(0,a.wy)((0,a._)("input",{"onUpdate:modelValue":n[0]||(n[0]=t=>i.taskName=t),type:"text",id:"title"},null,512),[[s.nr,i.taskName]])]),(0,a._)("div",I,[M,(0,a.wy)((0,a._)("input",{"onUpdate:modelValue":n[1]||(n[1]=t=>i.taskDeadline=t),type:"date",id:"date"},null,512),[[s.nr,i.taskDeadline]])]),(0,a._)("div",P,[W,(0,a.wy)((0,a._)("textarea",{"onUpdate:modelValue":n[2]||(n[2]=t=>i.taskDescription=t),id:"description"},null,512),[[s.nr,i.taskDescription]])]),(0,a._)("button",{class:"btn primary",onClick:n[3]||(n[3]=(0,s.iM)(((...t)=>i.createTask&&i.createTask(...t)),["prevent"]))},"Создать")])}var E=e(4870),N={setup(){const t=(0,E.iH)(""),n=(0,E.iH)(""),e=(0,E.iH)(""),s=(0,j.oR)(),a=()=>{const a={title:t.value,description:n.value,deadline:e.value};s.dispatch("createTask",a)};return{taskName:t,taskDescription:n,taskDeadline:e,createTask:a}}};const Y=(0,p.Z)(N,[["render",q]]);var R=Y;const V=t=>((0,a.dD)("data-v-2a9fa84a"),t=t(),(0,a.Cn)(),t),$={key:0,class:"card"},K=V((()=>(0,a._)("strong",null,"Статус",-1))),B=V((()=>(0,a._)("strong",null,"Дэдлайн",-1))),G=V((()=>(0,a._)("strong",null,"Описание",-1))),J={key:1,class:"return-btn-block"},Q={class:"text-white center"};function X(t,n,e,s,i,r){const o=(0,a.up)("AppStatus");return(0,a.wg)(),(0,a.iD)(a.HY,null,[s.computedTask.id?((0,a.wg)(),(0,a.iD)("div",$,[(0,a._)("h2",null,(0,_.zw)(s.computedTask.title),1),(0,a._)("p",null,[K,(0,a.Uk)(": "),(0,a.Wm)(o,{type:"done"})]),(0,a._)("p",null,[B,(0,a.Uk)(": "+(0,_.zw)(s.computedTask.deadline),1)]),(0,a._)("p",null,[G,(0,a.Uk)(": "+(0,_.zw)(s.computedTask.description),1)]),(0,a._)("div",null,[(0,a._)("button",{class:"btn",onClick:n[0]||(n[0]=t=>s.changeStatus("pending"))},"Взять в работу"),(0,a._)("button",{class:"btn primary",onClick:n[1]||(n[1]=t=>s.changeStatus("done"))},"Завершить"),(0,a._)("button",{class:"btn danger",onClick:n[2]||(n[2]=t=>s.changeStatus("cancelled"))},"Отменить")])])):(0,a.kq)("",!0),s.computedTask.id?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",J,[(0,a._)("h3",Q,[(0,a.Uk)(' Задача с ID "'),(0,a._)("strong",null,(0,_.zw)(s.taskId),1),(0,a.Uk)('" не найдена. ')]),(0,a._)("button",{class:"btn primary",onClick:n[3]||(n[3]=(...t)=>s.returnToMain&&s.returnToMain(...t))},"Вернуться на главную")]))],64)}var tt={components:{AppStatus:O},setup(){const t=(0,m.yj)(),n=(0,j.oR)(),e=(0,E.iH)("");let s=(0,E.qj)({id:"",title:"",status:"",deadline:"",description:""});const i=(0,a.Fl)((()=>s));function r(){const{id:t,title:a,status:i,deadline:r,description:o}=n.getters.taskItem(e.value);s.id=t,s.title=a,s.status=i,s.deadline=r,s.description=o}function o(){r(),s.id||(n.dispatch("fetchTasks"),r())}function l(){st.push("/")}function c(t){n.dispatch("changeTaskStatus",{id:e.value,status:t})}return(0,a.bv)((()=>{e.value=t.params.id,o()})),{computedTask:i,taskId:e,returnToMain:l,changeStatus:c}}};const nt=(0,p.Z)(tt,[["render",X],["__scopeId","data-v-2a9fa84a"]]);var et=nt;const st=(0,m.p7)({history:(0,m.PO)(),routes:[{path:"/",component:L},{path:"/new",component:R},{path:"/task/:id",component:et}],linkActiveClass:"active",linkExactActiveClass:"active"});var at=e(70);const it=(0,j.MT)({state(){return{apiUrl:"https://freelance-fbf64-default-rtdb.firebaseio.com/tasks.json",tasks:[],isLoading:!1}},getters:{tasksArr(t){return t.tasks},taskItem:({tasks:t})=>n=>t.find((t=>t.id===n))??{},isLoading({isLoading:t}){return t}},mutations:{addTask({tasks:t},n){t.push(n)},setFetchedData(t,n){t.tasks=[...n]},setLoading(t,n){t.isLoading=n}},actions:{async createTask({state:t,commit:n},e){const s={...e,status:"active"};try{await at.ZP.post(t.apiUrl,s),n("addTask",s)}catch(a){console.log(a)}},async fetchTasks({state:t,commit:n}){n("setLoading",!0);try{const e=await at.ZP.get(t.apiUrl);if(e.data){const t=Object.entries(e.data).reduce(((t,[n,{title:e,description:s,deadline:a,status:i}])=>[...t,{id:n,title:e,description:s,deadline:a,status:i}]),[]);n("setFetchedData",t)}}catch(e){console.log(e)}finally{n("setLoading",!1)}},async changeTaskStatus({state:t,commit:n},{id:e,status:s}){n("setLoading",!0);try{const a=t.tasks.find((t=>t.id===e));a&&(a.status=s,await at.ZP.patch(`${t.apiUrl}/${e}/status`,s))}catch(a){console.log(a)}finally{n("setLoading",!1)}}}});(0,s.ri)(h).use(st).use(it).mount("#app")}},n={};function e(s){var a=n[s];if(void 0!==a)return a.exports;var i=n[s]={exports:{}};return t[s](i,i.exports,e),i.exports}e.m=t,function(){var t=[];e.O=function(n,s,a,i){if(!s){var r=1/0;for(u=0;u<t.length;u++){s=t[u][0],a=t[u][1],i=t[u][2];for(var o=!0,l=0;l<s.length;l++)(!1&i||r>=i)&&Object.keys(e.O).every((function(t){return e.O[t](s[l])}))?s.splice(l--,1):(o=!1,i<r&&(r=i));if(o){t.splice(u--,1);var c=a();void 0!==c&&(n=c)}}return n}i=i||0;for(var u=t.length;u>0&&t[u-1][2]>i;u--)t[u]=t[u-1];t[u]=[s,a,i]}}(),function(){e.n=function(t){var n=t&&t.__esModule?function(){return t["default"]}:function(){return t};return e.d(n,{a:n}),n}}(),function(){e.d=function(t,n){for(var s in n)e.o(n,s)&&!e.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:n[s]})}}(),function(){e.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)}}(),function(){var t={143:0};e.O.j=function(n){return 0===t[n]};var n=function(n,s){var a,i,r=s[0],o=s[1],l=s[2],c=0;if(r.some((function(n){return 0!==t[n]}))){for(a in o)e.o(o,a)&&(e.m[a]=o[a]);if(l)var u=l(e)}for(n&&n(s);c<r.length;c++)i=r[c],e.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return e.O(u)},s=self["webpackChunkproject_freelance"]=self["webpackChunkproject_freelance"]||[];s.forEach(n.bind(null,0)),s.push=n.bind(null,s.push.bind(s))}();var s=e.O(void 0,[998],(function(){return e(6789)}));s=e.O(s)})();
//# sourceMappingURL=app.4cc25f1e.js.map